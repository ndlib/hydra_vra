<h1>Sub Collection Title</h1>

<%- if editor? -%>
  <span class="edit-browse">
    <%= edit_and_browse_subcollection_links(@subset) %>
  </span>
<%- end -%>

<%= debug @subset ? "Matched subset" : "Did not match subset" if RAILS_ENV == "development" -%>

<%- if @descriptions.any? -%>
  <h2>Description</h2>
  <%- @descriptions.each do |description| -%>
    <h3>Description Title goes in here</h3>
    <%= load_description(description) %>
    <%# #link_to "Essay: \"#{description.title}\"", essay_path(params[:collection_id], @essay.pid) description.introduction %>
    <%# link_to "[Read the complete essay]", essay_path(params[:collection_id], @essay.pid) %>
  <%- end -%>
<%- else -%>
  <%- if editor? -%>
    <h2>Description</h2>
    <p><%= "Essay forthcoming..." %></p>
  <%- end -%>
<%- end -%>

<%- if @subset && @subset.highlighted.any? -%>
  <h2>Featured sources</h2>
  <dl class="item-list featured">
    <%- @subset.highlighted(:response_format=>:solr).each_with_index do |document, counter| -%>
      <%- item = load_af_instance_from_solr(document) -%>
      <%-  item.item_title.blank? ? title = item.sub_collection_title : title = item.item_title -%>
      <%= render_document_index_partial(SolrDocument.new(document), title, counter, :index) %>
    <%- end -%>
  </dl>
<%- else -%>
  <%- if editor? -%>
    <h2>Featured sources</h2>
    <p>No highlighted items defined</p>
  <%- end -%>
<%- end -%>

<hr />

<h2>Complete Sources</h2>
<p><em><%= grouped_result_count(@browse_response, nil, nil) %> found</em></p>
<div class="pagination">
  <%= will_paginate @browse_response.docs, :page_links => false, :class => 'prev_next_links' %>
  <%= will_paginate @browse_response.docs, :container => false %>
</div>

<%= render :partial=>'sort_and_per_page', :locals => {:response=>@browse_response} if @browse_response.response['numFound'] > 10 %>
<%= render :partial=>'document_list', :locals => {:document_list=>@browse_document_list, :response=>@browse_response} %>

<div class="pagination">
  <%= will_paginate @browse_response.docs, :page_links => false, :class => 'prev_next_links' %>
  <%= will_paginate @browse_response.docs, :container => false%>
</div>
