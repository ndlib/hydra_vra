<h1>Sub Collection Title</h1>

<%- if editor? -%>
  <span class="edit-browse">
    <%= edit_and_browse_subcollection_links(@subset) %>
  </span>
<%- end -%>

<%= debug @subset ? "Matched subset" : "Did not match subset" if RAILS_ENV == "development" -%>

<%- if @descriptions.any? -%>
  <h2>Description</h2>  
  <%- @subset.descriptions(:response_format=>:solr).each_with_index do |document, counter| -%>
    <%- description = load_af_instance_from_solr(document) -%>
    <%= render :partial=>'descriptions/show_description', :locals => {:description => description, :document=> SolrDocument.new(document), :exhibit_id => params[:id]}%>
  <%- end -%>
<%- else -%>
  <%- if editor? -%>
    <h2>Description</h2>
    <p><%= "Essay forthcoming..." %></p>
  <%- end -%>
<%- end -%>


<%- if @subset && @subset.highlighted.any? -%>
  <h2>Featured sources</h2>
  <dl class="item-list featured">
    <%- @subset.highlighted(:response_format=>:solr).each_with_index do |document, counter| -%>
      <%- item = load_af_instance_from_solr(document) -%>
      <%-  item.item_title.blank? ? title = item.sub_collection_title : title = item.item_title -%>
      <%= render_document_index_partial(SolrDocument.new(document), title, counter, :index) %>
    <%- end -%>
  </dl>
<%- else -%>
  <%- if editor? -%>
    <h2>Featured sources</h2>
    <p>No highlighted items defined</p>
  <%- end -%>
<%- end -%>

<hr />

<h2>Complete sources</h2>
<div class="show_complete_sources_div">
   <a class="hidecompletesources" href="#" title="Hide Complete Sources" exhibit-id="<%= params[:exhibit_id] %>" >Hide Complete Sources</a>
  <dl class="item-list"></dl>
  <%= render :partial=>'shared/complete_sources'%>
</div>
<div class="hide_complete_sources_div">
  <a class="showcompletesources" href="#" title="Show Complete Sources" exhibit-id="<%= params[:exhibit_id] %>" >Show Complete Sources</a>
</div>
