<%- @exhibit ||= exhibit -%>
<div id="showHead">
  <div id="showUtils">
    <div class="tools"><%= render :partial => 'show_tools' %></div>
    <span class="edit-browse">
      <%- if editor? -%>
        <%= edit_and_browse_exhibit_links(@exhibit) %>
      <%- end -%>
    </span>
  </div>
</div>
<h1><%=  @exhibit.exhibit_title %></h1>
<%- if @exhibit.descriptions.any? -%>
  <h2>Description</h2>
  <%- @exhibit.descriptions(:response_format=>:solr).each_with_index do |document, counter| -%>
    <%- description = load_af_instance_from_solr(document) -%>
    <%= render :partial=>'descriptions/show_description', :locals => {:description => description, :document=> SolrDocument.new(document), :exhibit_id => params[:id]}%>
  <%- end -%>
<%- else -%>
  <%- if editor? -%>
    <h2>Description</h2>
    <p><%= "Essay forthcoming..." %></p>
  <%- end -%>
<%- end -%>

<%- if @exhibit && @exhibit.collections.any? -%>
  <h2>Collection details</h2>
  <dl class="item-list featured">
    <%- @exhibit.collections(:response_format=>:solr).each_with_index do |document, counter| -%>
      <%- item = load_af_instance_from_solr(document) -%>      
      <%= render_document_index_partial(SolrDocument.new(document), item.title, counter, :index) %>
    <%- end -%>
  </dl>

    <%- collection = @exhibit.collections.first-%>
    <%- if collection.descriptions.any? -%>
      <em>Collection Description</em>
      <%- collection.descriptions.each do |description| -%>
        <h3><%= description.title %></h3>
        <p class="collection_desc"> <%= load_description(description) %> </p>
      <%- end -%>
    <%- else -%>
      <%- if editor? -%>
        <em>Collection Essay</em>
        <p class="collection_desc">"Collection Essay forthcoming..."</p>
      <%- end -%>
    <%- end -%>
  
<%- else -%>
  <%- if editor? -%>
    <h2>Collection Details</h2>
    <p>No Collection Associated</p>
  <%- end -%>
<%- end -%>

<%- if @exhibit && @exhibit.featured.any? -%>
  <h2>Featured Sources</h2>
  <dl class="item-list featured">
    <%- @exhibit.featured(:response_format=>:solr).each_with_index do |document, counter| -%>
      <%- item = load_af_instance_from_solr(document) -%>      
      <%-  item.item_title.blank? ? title = item.sub_collection_title : title = item.item_title -%>
      <%= render_document_index_partial(SolrDocument.new(document), title, counter, :index) %>
    <%- end -%>
  </dl>  
<%- else -%>
  <%- if editor? -%>
    <h2>Featured Sources</h2>
    <p>No featured items defined</p>
  <%- end -%>
<%- end -%>

<hr />

<h2>Complete sources</h2>
<div class="show_complete_sources_div">
   <a class="hidecompletesources" href="#" title="Hide Complete Sources" exhibit-id="<%= params[:exhibit_id] %>" >Hide Complete Sources</a>
  <dl class="item-list"></dl>
  <%= render :partial=>'shared/complete_sources'%>
</div>
<div class="hide_complete_sources_div">
  <a class="showcompletesources" href="#" title="Show Complete Sources" exhibit-id="<%= params[:exhibit_id] %>" >Show Complete Sources</a>
</div>
