<%- component = load_af_instance_from_solr(document) -%>
<div class="with-thumbnail">
  <%- if !component.item_id.blank? -%>
    <div class="thumbnail-container">
      <%= link_to_document document, :label=>(image_tag(component.main_page.to_s.blank? ? '/images/no_thumbnail.png' : Page.load_instance(component.main_page.to_s).datastream_url('thumbnail'))) %>
    </div>
  <%- end -%>
  <dl class="defList">
    <%- if component.item_id.blank? -%>
      <%- index_field_names.each do |solr_fname| -%>
        <%- if document.get solr_fname %>
          <dt><%= h index_field_labels[solr_fname]%></dt>
          <dd><%= h document.get(solr_fname) %></dd>
        <%- end -%>
      <%- end -%>
    <%- else %>
      <%- item_field_names.each do |solr_fname| -%>
        <%- if document.get solr_fname -%>
          <dt><%= h item_field_labels[solr_fname]%></dt>
          <dd><%= h document.get(solr_fname) %></dd>
        <%- end -%>
      <%- end -%>
    <%- end %>
  </dl>
</div>
